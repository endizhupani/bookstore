<wait-cursor display-when="vm.isBusy"></wait-cursor>
<div class="panel-danger" ng-show="vm.errorMessage">{{ vm.errorMessage }}</div>
<div ng-hide="vm.isBusy" class="col-md-6">
    <h2 class="col-lg-12">Create a new book</h2>

    <form ng-hide="vm.isBusy" name="newBookForm" novalidate ng-submit="vm.addBook()">

       
            <div class="row">
                <div class="form-group col-xs-6">
                    <label for="title">Title</label>
                    <input class="form-control"
                           type="text"
                           id="title" name="title"
                           ng-model="vm.book.title"
                           required ng-minlength="5" ng-maxlength="100" />
                    <div ng-show="newBookForm.$submitted || newBookForm.title.$touched">
                        <span ng-show="newBookForm.title.$error.required"
                              class="text-warning">
                            The title is required.
                        </span>
                        <span ng-show="newBookForm.title.$error.minlength"
                              class="text-warning">
                            The title must be between 5 and 100 characters
                        </span>
                        <span ng-show="newBookForm.title.$error.maxlength"
                              class="text-warning">
                            The title be between 5 and 100 characters
                        </span>
                    </div>
                </div>
                <div class="form-group col-xs-6">
                    <label for="author">Author</label>
                    <input class="form-control"
                           type="text"
                           id="author" name="author"
                           ng-model="vm.book.author"
                           required ng-minlength="5" ng-maxlength="100" />
                    <div ng-show="newBookForm.$submitted || newBookForm.author.$touched">
                        <span ng-show="newBookForm.author.$error.required"
                              class="text-warning">
                            The author is required.
                        </span>
                        <span ng-show="newBookForm.author.$error.minlength"
                              class="text-warning">
                            The author's name must be between 5 and 100 characters
                        </span>
                        <span ng-show="newBookForm.author.$error.maxlength"
                              class="text-warning">
                            The author's name must be between 5 and 100 characters
                        </span>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="form-group col-xs-6">
                    <label for="numberOfPages">Pages</label>
                    <input class="form-control"
                           type="number"
                           id="numberOfPages" name="numberOfPages"
                           ng-model="vm.book.numberOfPages"
                           required />
                    <div ng-show="newBookForm.$submitted || newBookForm.numberOfPages.$touched">
                        <span ng-show="newBookForm.numberOfPages.$error.required"
                              class="text-warning">
                            The number of pages is required.
                        </span>
                    </div>
                </div>
                <div class="form-group col-xs-6">
                    <label for="publicationDate">Publication date</label>
                    <input class="form-control datepicker"
                           type="text"
                           id="publicationDate" name="publicationDate"
                           ng-model="vm.book.publicationDate"
                           required />
                    <div ng-show="newBookForm.$submitted || newBookForm.publicationDate.$touched">
                        <span ng-show="newBookForm.publicationDate.$error.required"
                              class="text-warning">
                            The publication date is required.
                        </span>
                    </div>
                </div>
            </div>
        
        <div class="form-group">
            <label>Tags</label>
            <ui-select multiple tagging="vm.tagTransform" ng-model="vm.book.tags" theme="bootstrap" style="width: 100%;" title="Choose tags">
                <ui-select-match placeholder="Select tag...">{{$item.name}}</ui-select-match>
                <ui-select-choices repeat="tag in vm.tags | propsFilter: {name: $select.search}">
                    <div ng-if="tag.isTag" ng-bind-html="(tag.name | highlight: $select.search) +' (new)'"></div>
                    <div ng-if="!tag.isTag" ng-bind-html="tag.name + tag.isTag| highlight: $select.search"></div>

                </ui-select-choices>
            </ui-select>
        </div>
            <div class="form-group">
                <label for="description">Description</label>
                <textarea class="form-control"
                          cols="100"
                          rows="6"
                          id="description" name="description"
                          ng-model="vm.book.description"
                          required></textarea>
                <div ng-show="newBookForm.$submitted || newBookForm.description.$touched">
                    <span ng-show="newBookForm.description.$error.required"
                          class="text-warning">
                        The description is required.
                    </span>
                </div>
            </div>



            <div class="form-group">
                <input type="submit"
                       value="Create"
                       class="btn btn-success"
                       ng-disabled="newBookForm.$invalid" />
            </div>
        
    </form>

</div>