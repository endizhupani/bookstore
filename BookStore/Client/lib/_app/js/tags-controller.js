!function(){"use strict";function t(t){function e(e){var s=n.tags[e];confirm("Are you sure you want to delete "+s.name+"? This tag will be removed from all the books associated with it.")?t.delete("/api/tags/"+s.name).then(function(){n.tags.splice(e,1),n.message="Tag deleted sucessfully",n.emptyMessage=a},function(t){n.errorMessage="Failed to delete tag"}).finally(function(){n.isBusy=!1}):n.isBusy=!1}function a(){n.message=""}function s(){n.isBusy=!0,t.post("/api/tags",n.tag).then(function(){n.tags.push(n.tag),$window.location.href="#!/"},function(){n.errorMessage="Failed to add tag."}).finally(function(){n.isBusy=!1})}var n=this;n.tags=[],n.tag={},n.errorMessage="",n.message="",n.isBusy=!0,n.deleteTag=e,n.addTag=s,t.get("/api/tags").then(function(t){angular.copy(t.data,n.tags)},function(t){n.errorMessage="Failed to load data "+t}).finally(function(){n.isBusy=!1})}t.$inject=["$http"],angular.module("app-tags").controller("tagsController",t)}();